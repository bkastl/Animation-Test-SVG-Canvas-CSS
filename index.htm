<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Animationtests</title>
	<style>
	#stage div {
		position:  absolute;
	}
	#stage {
		position: relative;
		width: 800px;
		height: 600px;
		overflow: hidden;
	}

	.blocktransition {
		-webkit-transition: none !important;
		transition: none !important;
	}

	

	@-webkit-keyframes height
	{
		from {-webkit-transform: scaleY(0);}
		to {-webkit-transform: scaleY(1);}
	}
	@keyframes height
	{
		from {transform: scaleY(0);}
		to {transform: scaleY(1);}
	}

	@-webkit-keyframes rotate
	{
		from {-webkit-transform: rotate(0deg);}
		to {-webkit-transform: rotate(360deg);}
	}
	@keyframes rotate
	{
		from {transform: rotate(0deg);}
		to {transform: rotate(360deg);}
	}
	</style>
</head>
<body>
	<div id="disclaimer">
		<h1>Warning!</h1>
		<p>This test tries to test the animation performance of your browser. Some tests are very demanding and may cause slowdowns of your browser, especially on mobile devices. Maybe you will hear some noises from your fan.</p>
		<p>As I am writing this lines, there are some browsers on high end desktop computers which can run the complete testsuite at about 80 to 90 percent of the maximum possible frames per second (60 in each test). Other browsers will skip frames and continue with the next test.</p>
		<p>The tests will take a mininum of 3 minutes to complete, slower systems may take longer...</p>
		<p>Your browser has support for <span id="supportedfeatures"></span> and can run <span id="supportedtests"></span> of <span id="totaltests"></span> tests.</p>
	</div>
	<div id="stage"></div>
	<div id="statistics">
		<h1 id="currentTest"></h1>
		<p>Test <span id="currentTestNumber"></span> of <span id="totalTests"></span></p>
		<p id="fps"></p>
		<p>Frames remaining: <span id="remainingFrames"></span> <span id="skippedFrames"></span></p>
		<p id="skippedtests"></p>
	</div>
	<script src="vendor/modernizr.min.js"></script>
	<script src="vendor/pixi.js"></script>
	<script src="utils/polyfills.js"></script>
	<script src="utils/utils.js"></script>
	<script src="utils/statistics.js"></script>
	<script src="utils/stage.js"></script>
	<script src="testrunner.js"></script>
	<script src="objects/Particle.js"></script>
	<script src="objects/Bar.js"></script>
	<script src="objects/Pie.js"></script>
	<script src="objects/Line.js"></script>
	<script src="objects/Spinner.js"></script>
	<script>
		var setTimestamp, setTranslate;

		var testSequence = [ 
			
			{id: 1, object: "Particle", maxObjects: 100, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 2, object: "Particle", maxObjects: 100, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 3, object: "Particle", maxObjects: 100, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{id: 4, object: "Particle", maxObjects: 100, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 5, object: "Particle", maxObjects: 100, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg, csstransforms"},
			{id: 6, object: "Particle", maxObjects: 100, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 7, object: "Particle", maxObjects: 100, type: "htmlposition", description: "HTML with CSS Positioning", required: 'css'},
			{id: 8, object: "Particle", maxObjects: 100, type: "htmlposition", description: "HTML with CSS Positioning", required: 'css'},
			{id: 9, object: "Particle", maxObjects: 250, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 10, object: "Particle", maxObjects: 250, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 11, object: "Particle", maxObjects: 250, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{id: 12, object: "Particle", maxObjects: 250, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 13, object: "Particle", maxObjects: 250, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg,csstransforms"},
			{id: 14, object: "Particle", maxObjects: 250, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 15, object: "Particle", maxObjects: 250, type: "htmlposition", description: "HTML with CSS Positioning", required: 'css'},
			{id: 16, object: "Particle", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas", offscreen: true},
			{id: 17, object: "Particle", maxObjects: 1000, type: "webgl", description: "Canvas (WebGL)", required: "canvas, webgl", offscreen: true},
			{id: 18, object: "Particle", maxObjects: 1000, type: "svg", description: "SVG with attribute change", required: "svg", offscreen: true},
			{id: 19, object: "Particle", maxObjects: 1000, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg", offscreen: true},
			{id: 20, object: "Particle", maxObjects: 1000, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg", offscreen: true},
			{id: 21, object: "Particle", maxObjects: 1000, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg,csstransforms", offscreen: true},
			{id: 22, object: "Particle", maxObjects: 1000, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms", offscreen: true},
			{id: 23, object: "Particle", maxObjects: 1000, type: "htmlposition", description: "HTML with CSS Positioning", required: 'css', offscreen: true},
			{id: 24, object: "Particle", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 25, object: "Particle", maxObjects: 1000, type: "canvasbuffer", description: "Canvas 2D width buffering", required: "canvas"},
			{id: 26, object: "Particle", maxObjects: 1000, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 27, object: "Particle", maxObjects: 1000, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{id: 28, object: "Particle", maxObjects: 1000, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 29, object: "Particle", maxObjects: 1000, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg, csstransforms"},
			{id: 30, object: "Particle", maxObjects: 1000, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 31, object: "Particle", maxObjects: 2500, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 32, object: "Particle", maxObjects: 2500, type: "canvasbuffer", description: "Canvas 2D width buffering", required: "canvas"},
			{id: 33, object: "Particle", maxObjects: 2500, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 34, object: "Particle", maxObjects: 2500, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 35, object: "Particle", maxObjects: 1000, type: "webgl", description: "Canvas (WebGL)", required: "webgl, canvas"},
			{id: 36, object: "Particle", maxObjects: 2500, type: "webgl", description: "Canvas (WebGL)", required: "webgl, canvas"},
			{id: 37, object: "Particle", maxObjects: 5000, type: "webgl", description: "Canvas (WebGL)", required: "webgl, canvas"},
			{id: 38, object: "Bar", maxObjects: 80, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 39, object: "Bar", maxObjects: 80, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 40, object: "Bar", maxObjects: 80, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 41, object: "Bar", maxObjects: 80, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{id: 42, object: "Bar", maxObjects: 80, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 43, object: "Bar", maxObjects: 80, type: "htmltransition", description: "HTML with CSS Transitions", required: "csstransitions"},
			{id: 44, object: "Bar", maxObjects: 80, type: "htmlanimation", description: "HTML with CSS Animations", required: "cssanimations"},
			{id: 45, object: "Bar", maxObjects: 240, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 46, object: "Bar", maxObjects: 240, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 47, object: "Bar", maxObjects: 240, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 48, object: "Bar", maxObjects: 240, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{id: 49, object: "Bar", maxObjects: 240, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 50, object: "Bar", maxObjects: 240, type: "htmltransition", description: "HTML with CSS Transitions", required: "csstransitions"},
			{id: 51, object: "Bar", maxObjects: 240, type: "htmlanimation", description: "HTML with CSS Animations", required: "cssanimations"},
			{id: 52, object: "Bar", maxObjects: 240, type: "webgl", description: "Canvas (WebGL)", required: "canvas, webgl"},
			{id: 53, object: "Bar", maxObjects: 800, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 54, object: "Bar", maxObjects: 800, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 55, object: "Bar", maxObjects: 800, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{id: 56, object: "Bar", maxObjects: 800, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{id: 57, object: "Bar", maxObjects: 800, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{id: 58, object: "Bar", maxObjects: 800, type: "webgl", description: "Canvas (WebGL)", required: "canvas, webgl"},
			{id: 59, object: "Pie", maxObjects: 100, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 60, object: "Pie", maxObjects: 100, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 61, object: "Pie", maxObjects: 250, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 62, object: "Pie", maxObjects: 250, type: "svg", description: "SVG with attribute change", required: "svg"},
			{id: 63, object: "Pie", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 64, object: "Pie", maxObjects: 1000, type: "svg", description: "SVG with attribute chnage", required: "svg"},
			{id: 65, object: "Line", maxObjects: 20, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 66, object: "Line", maxObjects: 20, type: "svg", description: "SVG Transforms", required: "svg"},
			{id: 67, object: "Line", maxObjects: 50, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{id: 68, object: "Line", maxObjects: 50, type: "svg", description: "SVG Transforms", required: "svg"},
			{id: 69, object: "Line", maxObjects: 100, type: "canvas", description: "Canvas 2D", required: "canvas"}, 
			{id: 70, object: "Line", maxObjects: 100, type: "svg", description: "SVG Transforms", required: "svg"},
			{id: 71, object: "Spinner", maxObjects: 48, type: "canvas", description: "Canvas 2D", required: "canvas", createIndividualElements: true},
			{id: 72, object: "Spinner", maxObjects: 48, type: "svg", description: "SVG Transforms", required: "svg", createIndividualElements: true},
			{id: 73, object: "Spinner", maxObjects: 48, type: "svganimations", description: "SVG Animation", required: "svg, smil", createIndividualElements: true},
			{id: 74, object: "Spinner", maxObjects: 48, type: "htmlanimation", description: "SVG with HTML Animation", required: "svg, cssanimations", createIndividualElements: true},
			{id: 75, object: "Spinner", maxObjects: 160, type: "canvas", description: "Canvas 2D", required: "canvas", createIndividualElements: true},
			{id: 76, object: "Spinner", maxObjects: 160, type: "svg", description: "SVG Transforms", required: "svg", createIndividualElements: true},
			{id: 77, object: "Spinner", maxObjects: 160, type: "svganimations", description: "SVG Animation", required: "svg, smil", createIndividualElements: true},
			{id: 78, object: "Spinner", maxObjects: 160, type: "htmlanimation", description: "SVG with HTML Animation", required: "svg, cssanimations", createIndividualElements: true},
			{id: 79, object: "Spinner", maxObjects: 360, type: "canvas", description: "Canvas 2D", required: "canvas", createIndividualElements: true},
			{id: 80, object: "Spinner", maxObjects: 360, type: "svg", description: "SVG Transforms", required: "svg", createIndividualElements: true},
			{id: 81, object: "Spinner", maxObjects: 360, type: "svganimations", description: "SVG Animation", required: "svg, smil", createIndividualElements: true},
			{id: 82, object: "Spinner", maxObjects: 360, type: "htmlanimation", description: "SVG with HTML Animation", required: "svg, cssanimations", createIndividualElements: true}
			
		];
		
	
		var currentTest = 0,
		testDuration = 360,
		stageWidth = 800,
		stageHeight= 600,
		stage = document.getElementById('stage'),
		statistics, stageObject, runner, breakUnderFPS = 20,
		breakImmediatelyFPS = 10, stopAfterBreaks = 1, totalTestCount,
		context = null, svg = null, svg_ns = "http://www.w3.org/2000/svg", webglRenderer;

		

		if (Modernizr.performance) {
			setTimestamp = function() { return performance.now()};
		} 
		else {
			setTimestamp = function() { return +new Date;};
		}
		
		if (Modernizr.csstransforms3d) {
			setTranslate = function(x,y) {return "translate3d("+x+"px,"+y+"px,0px)";}
		}
		else {
			setTranslate = function(x,y) {return "translate("+x+"px,"+y+"px)";} 
		}

		function load() {
			
			statistics = new Statistics();
			stageObject = new Stage(stage, statistics);
			runner = new TestRunner(testSequence,stageObject);
			runner.checkSystemCapabilities();

			runner.run();
			
      	}
      	window.onload = load;

	</script>
	
	
</body>
</html>