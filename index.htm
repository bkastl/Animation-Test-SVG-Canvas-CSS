<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Animationtests</title>
	<style>
	#stage div {
		position:  absolute;
	}
	#stage {
		position: relative;
	}

	.blocktransition {
		-webkit-transition: none !important;
		transition: none !important;
	}

	

	@-webkit-keyframes height
	{
		from {-webkit-transform: scaleY(0);}
		to {-webkit-transform: scaleY(1);}
	}
	@keyframes height
	{
		from {transform: scaleY(0);}
		to {transform: scaleY(1);}
	}
	</style>
</head>
<body>
	<div id="disclaimer">
		<h1>Warning!</h1>
		<p>This test tries to test the animation performance of your browser. Some tests are very demanding and may cause slowdowns of your browser, especially on mobile devices. Maybe you will hear some noises from your fan.</p>
		<p>As I am writing this lines, there are some browsers on high end desktop computers which can run the complete testsuite at about 80 to 90 percent of the maximum possible frames per second (60 in each test). Other browsers will skip frames and continue with the next test.</p>
		<p>The tests will take a mininum of 3 minutes to complete, slower systems may take longer...</p>
	</div>
	<div id="stage"></div>
	<div id="statistics">
		<h1 id="currentTest"></h1>
		<p>Test <span id="currentTestNumber"></span> of <span id="totalTests"></span></p>
		<p id="fps"></p>
		<p>Frames remaining: <span id="remainingFrames"></span> <span id="skippedFrames"></span></p>
	</div>
	<script src="vendor/modernizr.min.js"></script>
	<script src="vendor/pixi.js"></script>
	<script src="utils/polyfills.js"></script>
	<script src="utils/utils.js"></script>
	<script src="utils/statistics.js"></script>
	<script src="utils/stage.js"></script>
	<script src="testrunner.js"></script>
	<script src="objects/Particle.js"></script>
	<script src="objects/Bar.js"></script>
	<script src="objects/Pie.js"></script>
	<script src="objects/Line.js"></script>
	<script>
		var setTimestamp, setTranslate;

		var testSequence = [ 
			
			{object: "Particle", maxObjects: 100, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Particle", maxObjects: 100, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Particle", maxObjects: 100, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{object: "Particle", maxObjects: 100, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Particle", maxObjects: 100, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg, csstransforms"},
			{object: "Particle", maxObjects: 100, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Particle", maxObjects: 100, type: "htmlposition", description: "HTML with CSS Positioning", required: null},
			{object: "Particle", maxObjects: 250, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Particle", maxObjects: 250, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Particle", maxObjects: 250, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{object: "Particle", maxObjects: 250, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Particle", maxObjects: 250, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg,csstransforms"},
			{object: "Particle", maxObjects: 250, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Particle", maxObjects: 250, type: "htmlposition", description: "HTML with CSS Positioning", required: null},
			{object: "Particle", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "svg", description: "SVG with attribute change", required: "svg", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg,csstransforms", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms", offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "htmlposition", description: "HTML with CSS Positioning", required: null, offscreen: true},
			{object: "Particle", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Particle", maxObjects: 1000, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Particle", maxObjects: 1000, type: "svgrebuild", description: "SVG with removing and inserting", required: "svg"},
			{object: "Particle", maxObjects: 1000, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Particle", maxObjects: 1000, type: "svgcsstransforms", description: "SVG with CSS Transforms (3D)", required: "svg, csstransforms"},
			{object: "Particle", maxObjects: 1000, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Particle", maxObjects: 2500, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Particle", maxObjects: 2500, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Particle", maxObjects: 2500, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},

			{object: "Particle", maxObjects: 1000, type: "webgl", description: "Canvas (WebGL", required: "webgl, canvas"},
			{object: "Particle", maxObjects: 2500, type: "webgl", description: "Canvas (WebGL", required: "webgl, canvas"},
			{object: "Particle", maxObjects: 5000, type: "webgl", description: "Canvas (WebGL", required: "webgl, canvas"},
			{object: "Bar", maxObjects: 80, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Bar", maxObjects: 80, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Bar", maxObjects: 80, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Bar", maxObjects: 80, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{object: "Bar", maxObjects: 80, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Bar", maxObjects: 80, type: "htmltransition", description: "HTML with CSS Transitions", required: "csstransitions"},
			{object: "Bar", maxObjects: 80, type: "htmlanimation", description: "HTML with CSS Animations", required: "cssanimations"},
			{object: "Bar", maxObjects: 240, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Bar", maxObjects: 240, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Bar", maxObjects: 240, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Bar", maxObjects: 240, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{object: "Bar", maxObjects: 240, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Bar", maxObjects: 240, type: "htmltransition", description: "HTML with CSS Transitions", required: "csstransitions"},
			{object: "Bar", maxObjects: 240, type: "htmlanimation", description: "HTML with CSS Animations", required: "cssanimations"},
			{object: "Bar", maxObjects: 240, type: "webgl", description: "Canvas (WebGL)", required: "canvas, webgl"},
			{object: "Bar", maxObjects: 800, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Bar", maxObjects: 800, type: "svg", description: "SVG with attribute change", required: "svg"},
			{object: "Bar", maxObjects: 800, type: "svgtransforms", description: "SVG with SVG Transformations", required: "svg"},
			{object: "Bar", maxObjects: 800, type: "svganimations", description: "SVG with SVG Animations", required: "svg, smil"},
			{object: "Bar", maxObjects: 800, type: "html", description: "HTML with CSS Transforms (3D)", required: "csstransforms"},
			{object: "Bar", maxObjects: 800, type: "webgl", description: "Canvas (WebGL)", required: "canvas, webgl"},
			{object: "Pie", maxObjects: 100, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Pie", maxObjects: 100, type: "svg", description: "SVG with attribute chnage", required: "svg"},
			{object: "Pie", maxObjects: 250, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Pie", maxObjects: 250, type: "svg", description: "SVG with attribute chnage", required: "svg"},
			{object: "Pie", maxObjects: 1000, type: "canvas", description: "Canvas 2D", required: "canvas"},
			{object: "Pie", maxObjects: 1000, type: "svg", description: "SVG with attribute chnage", required: "svg"}
		];
		testSequence = [{object: "Line", maxObjects: 50, type: "canvas", description: "Line Test", required: null}];
		var currentTest = 0,
		testDuration = 500,
		stageWidth = 800,
		stageHeight= 600,
		stage = document.getElementById('stage'),
		statistics, stageObject, breakUnderFPS = 20, breakImmediatly = 10, stopAfterBreaks = 2,
		context = null, svg = null, svg_ns = "http://www.w3.org/2000/svg", webglRenderer;

		

		if (Modernizr.performance) {
			setTimestamp = function() { return performance.now()};
		} 
		else {
			setTimestamp = function() { return +new Date;};
		}
		
		if (Modernizr.csstransforms3d) {
			setTranslate = function(x,y) {return "translate3d("+x+"px,"+y+"px,0px)";}
		}
		else {
			setTranslate = function(x,y) {return "translate("+x+"px,"+y+"px)";} 
		}

		function load() {
	
			statistics = new Statistics();
			stageObject = new Stage(stage, statistics);
			var runner = new TestRunner(testSequence,stageObject);
			runner.checkSystemCapabilities();
			runner.run();
			
      	}
      	window.onload = load;

	</script>
	
	
</body>
</html>